# pages {
#   data {
#     id
#     attributes {
#       name
#       short_name
#       is_locked

#       conditions {
#         ...conditionEntityFragment
#       }

#       questions {
#         ...questionEntityFragment
#       }
#     }
#   }
# }

fragment surveyEntityFragment on SurveyEntity {
  id
  attributes {
    # Metadata
    description
    order
    title
    slug
    status
    language
    email
    keywords {
      id
      label
      value
    }

    author {
      data {
        attributes {
          email
          username
        }
      }
    }

    # Landing
    landing {
      data {
        id
        attributes {
          title
          color_theme
          logo
          subtitle
        }
      }
    }

    # Pages
    # The content has been removed because its going too deep
    pages {
      data {
        id
        attributes {
          name
          short_name
          is_locked
          conditions {
            data {
              id
              attributes {
                type
                operator
                target {
                  data {
                    id
                  }
                }
                target_value
                referer_page {
                  data {
                    id
                  }
                }
                referer_question {
                  data {
                    id
                  }
                }
                group
              }
            }
          }
        }
      }
    }

    # Consent & related
    need_consent
    notice_consent {
      data {
        id
        attributes {
          url
          name
          hash
          mime
          provider
          size
        }
      }
    }
  }
}
